# ğŸ—ºï¸ HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng UI Má»›i - Map Screen

## âœ¨ TÃ­nh NÄƒng Má»›i

### 1. ğŸ” Ã” TÃ¬m Kiáº¿m ThÃ´ng Minh (Google Places Autocomplete)
- **Vá»‹ trÃ­:** PhÃ­a trÃªn cÃ¹ng cá»§a map
- **Chá»©c nÄƒng:**
  - GÃµ Ä‘á»‹a chá»‰ â†’ Hiá»‡n gá»£i Ã½ tá»± Ä‘á»™ng
  - Chá»n Ä‘á»‹a Ä‘iá»ƒm â†’ Map zoom Ä‘áº¿n vÃ  chá»‰ Ä‘Æ°á»ng
  - Icon micro (voice search) - Ä‘á»ƒ dÃ nh cho tÆ°Æ¡ng lai
  - Icon menu (hamburger) - Ä‘á»ƒ dÃ nh cho tÆ°Æ¡ng lai
  - Icon avatar - Ä‘á»ƒ dÃ nh cho tÆ°Æ¡ng lai

### 2. ğŸ¯ NÃºt Quick Action (DÆ°á»›i search bar)
CÃ¡c nÃºt trÃ²n nhanh:
- ğŸ  **NhÃ  riÃªng** - TÃ¬m Ä‘iá»ƒm quan tÃ¢m gáº§n
- ğŸ½ï¸ **NhÃ  hÃ ng** - TÃ¬m nhÃ  hÃ ng gáº§n
- ğŸ¨ **KhÃ¡ch sáº¡n** - TÃ¬m khÃ¡ch sáº¡n gáº§n
- â›½ **XÄƒng dáº§u** - TÃ¬m tráº¡m xÄƒng gáº§n
- â˜• **CÃ  phÃª** - TÃ¬m quÃ¡n cÃ  phÃª gáº§n
- ğŸ›’ **Mua sáº¯m** - TÃ¬m trung tÃ¢m mua sáº¯m
- ğŸ¦ **NgÃ¢n hÃ ng** - TÃ¬m ngÃ¢n hÃ ng gáº§n
- ğŸ¥ **Bá»‡nh viá»‡n** - TÃ¬m bá»‡nh viá»‡n gáº§n

### 3. ğŸ“ NÃºt Vá»‹ TrÃ­ Hiá»‡n Táº¡i
- **Vá»‹ trÃ­:** GÃ³c pháº£i, phÃ­a dÆ°á»›i
- **Icon:** MÅ©i tÃªn Ä‘á»‹nh vá»‹ (locate)
- **Chá»©c nÄƒng:** Quay vá» vá»‹ trÃ­ hiá»‡n táº¡i cá»§a báº¡n

### 4. ğŸ—ºï¸ NÃºt Layers
- **Vá»‹ trÃ­:** GÃ³c pháº£i, dÆ°á»›i nÃºt location
- **Icon:** Layers
- **Chá»©c nÄƒng:** Chá»n loáº¡i báº£n Ä‘á»“ (satellite, terrain, traffic)
- **Tráº¡ng thÃ¡i:** Äang Ä‘á»ƒ dÃ nh, chÆ°a implement

## ğŸ¨ Thay Äá»•i Giao Diá»‡n

### ÄÃ£ XÃ³a:
- âŒ FilterButtons cÅ© (Táº¥t cáº£, Viá»‡t Nam, Chay, Pizza, etc.)
- âŒ SearchBar cÅ© (tÃ¬m kiáº¿m nhÃ  hÃ ng)
- âŒ Counter "X nhÃ  hÃ ng Ä‘Æ°á»£c tÃ¬m tháº¥y"

### ÄÃ£ ThÃªm:
- âœ… Google Places Search Bar (autocomplete thÃ´ng minh)
- âœ… Quick Action Buttons (8 nÃºt nhanh)
- âœ… My Location button (style Google Maps)
- âœ… Layers button (placeholder)

## ğŸ”§ CÃ¡ch Sá»­ Dá»¥ng

### TÃ¬m Kiáº¿m Äá»‹a Äiá»ƒm:
1. Nháº¥n vÃ o Ã´ "TÃ¬m kiáº¿m á»Ÿ Ä‘Ã¢y"
2. GÃµ Ä‘á»‹a chá»‰ (vd: "Bitexco", "Vincom Center", "Bá»‡nh viá»‡n FV")
3. Chá»n má»™t káº¿t quáº£ tá»« danh sÃ¡ch gá»£i Ã½
4. Map tá»± Ä‘á»™ng zoom Ä‘áº¿n Ä‘á»‹a Ä‘iá»ƒm
5. Hiá»ƒn thá»‹ marker xanh táº¡i Ä‘á»‹a Ä‘iá»ƒm
6. Tá»± Ä‘á»™ng chá»‰ Ä‘Æ°á»ng tá»« vá»‹ trÃ­ hiá»‡n táº¡i (náº¿u cÃ³)

### Quick Action:
1. Nháº¥n vÃ o má»™t trong 8 nÃºt (vd: "NhÃ  hÃ ng")
2. Há»‡ thá»‘ng tÃ¬m Ä‘á»‹a Ä‘iá»ƒm gáº§n nháº¥t
3. Map zoom Ä‘áº¿n Ä‘á»‹a Ä‘iá»ƒm Ä‘áº§u tiÃªn
4. Hiá»ƒn thá»‹ chá»‰ Ä‘Æ°á»ng

### Quay Vá» Vá»‹ TrÃ­ Hiá»‡n Táº¡i:
1. Nháº¥n nÃºt "My Location" (icon locate)
2. Map zoom vá» vá»‹ trÃ­ cá»§a báº¡n

## ğŸ“¦ Files Má»›i

### Components:
1. `components/common/GooglePlacesSearchBar.tsx` - Search bar vá»›i autocomplete
2. `components/common/QuickActionButtons.tsx` - 8 nÃºt quick action

### Services:
3. `services/GooglePlacesAutocomplete.ts` - Service gá»i Google Places API

### Updated:
4. `app/(tabs)/map.tsx` - Map screen vá»›i UI má»›i

## ğŸ”‘ Google APIs Sá»­ Dá»¥ng

### 1. Places Autocomplete API
- Gá»£i Ã½ Ä‘á»‹a Ä‘iá»ƒm khi gÃµ
- Cost: ~$2.83 / 1000 sessions

### 2. Places Details API
- Láº¥y tá»a Ä‘á»™, Ä‘á»‹a chá»‰ chi tiáº¿t
- Cost: $17 / 1000 requests

### 3. Places Nearby Search API
- TÃ¬m Ä‘á»‹a Ä‘iá»ƒm gáº§n theo loáº¡i
- Cost: $32 / 1000 requests

### 4. Directions API
- Chá»‰ Ä‘Æ°á»ng tá»« A Ä‘áº¿n B
- Cost: $5 / 1000 requests (basic)

**ğŸ’° Free Credit:** Google táº·ng $200/thÃ¡ng â†’ Äá»§ Ä‘á»ƒ dev/test

## âš™ï¸ Cáº¥u HÃ¬nh

API key Ä‘Ã£ Ä‘Æ°á»£c setup trong `.env`:
```
EXPO_PUBLIC_GOOGLE_MAPS_API_KEY=your_api_key_here
```

Map provider trong `constants/index.ts`:
```typescript
export const MAP_PROVIDER: 'google' | 'openstreetmap' = 'google'
```

## ğŸ§ª Testing

```bash
# Start app
npx expo start

# Scan QR code hoáº·c press:
# - 'a' Ä‘á»ƒ má»Ÿ Android
# - 'i' Ä‘á»ƒ má»Ÿ iOS
# - 'w' Ä‘á»ƒ má»Ÿ web
```

### Test Steps:
1. âœ… Má»Ÿ Map tab
2. âœ… Nháº¥n search bar â†’ GÃµ "Bitexco"
3. âœ… Chá»n káº¿t quáº£ Ä‘áº§u tiÃªn
4. âœ… Kiá»ƒm tra map zoom Ä‘áº¿n Ä‘á»‹a Ä‘iá»ƒm
5. âœ… Kiá»ƒm tra hiá»ƒn thá»‹ Ä‘Æ°á»ng Ä‘i (polyline xanh)
6. âœ… Nháº¥n "NhÃ  hÃ ng" quick action
7. âœ… Kiá»ƒm tra tÃ¬m nhÃ  hÃ ng gáº§n
8. âœ… Nháº¥n "My Location"
9. âœ… Kiá»ƒm tra quay vá» vá»‹ trÃ­ hiá»‡n táº¡i

## âš ï¸ LÆ°u Ã

1. **Autocomplete cÃ³ debounce 500ms** - TrÃ¡nh spam API
2. **Voice search** - Chá»‰ lÃ  UI, chÆ°a implement
3. **Menu icon** - Chá»‰ lÃ  UI, chÆ°a implement
4. **Layers button** - Placeholder, chÆ°a implement
5. **Cáº§n enable Location permission** - Äá»ƒ hiá»ƒn thá»‹ vá»‹ trÃ­ hiá»‡n táº¡i

## ğŸ› Troubleshooting

### KhÃ´ng hiá»ƒn thá»‹ gá»£i Ã½ khi search:
- Kiá»ƒm tra API key cÃ³ Ä‘Ãºng khÃ´ng
- Kiá»ƒm tra Places API Ä‘Ã£ enable chÆ°a
- Xem console logs Ä‘á»ƒ debug

### KhÃ´ng chá»‰ Ä‘Æ°á»ng Ä‘Æ°á»£c:
- Kiá»ƒm tra Directions API Ä‘Ã£ enable chÆ°a
- Kiá»ƒm tra cÃ³ quyá»n Location khÃ´ng
- Xem console logs

### App crash khi nháº¥n Quick Action:
- Kiá»ƒm tra Places Nearby API Ä‘Ã£ enable chÆ°a
- Kiá»ƒm tra cÃ³ location permission khÃ´ng

## ğŸ“ Support

Náº¿u gáº·p váº¥n Ä‘á»:
1. Check console logs
2. Check Google Cloud Console â†’ APIs & Services â†’ Enabled APIs
3. Check API key restrictions
4. Check billing account (náº¿u vÆ°á»£t free tier)

## ğŸ¯ Style Guide

UI nÃ y Ä‘Æ°á»£c thiáº¿t káº¿ theo **Google Maps Material Design**:
- White background buttons vá»›i shadow
- Rounded corners (24px radius)
- Icons mÃ u #5F6368 (gray)
- Selected/Active mÃ u #4285F4 (blue)
- Clean, minimal, modern

Enjoy coding! ğŸš€

